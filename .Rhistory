p_loc = start[[1]],
np_loc = start[[2]],
ppl_scaling = params[[1]],
mean_age = params[[2]],
sd_age = params[[3]],
travel_cost = params[[4]],
value = as.numeric(params[[5]]),
mobility = as.numeric(params[[6]]),
k = params[[7]],
r = params[[8]],
maturity = params[[9]],
max_age = params[[10]],
years = 10,
management_cost = 500)
load_all()
simulated <- deforecast(xdim = NULL,
ydim = NULL,
explicit = TRUE,
p_n = NULL,
np_n = NULL,
ppl_n = NULL,
ppl_loc = start[[3]],
p_loc = start[[1]],
np_loc = start[[2]],
ppl_scaling = params[[1]],
mean_age = params[[2]],
sd_age = params[[3]],
travel_cost = params[[4]],
value = as.numeric(params[[5]]),
mobility = as.numeric(params[[6]]),
k = params[[7]],
r = params[[8]],
maturity = params[[9]],
max_age = params[[10]],
years = 10,
management_cost = 500)
View(simulated)
years = 10;
management_cost = 500
p_s <- sum(simulated[[2]][[1]][,4]) # trees/year1/protected column == 1
np_s <- length(simulated[[2]][[1]][,4]) - sum(simulated[[2]][[1]][,4])
# protected at start
if (length(simulated[[2]]) != (years + 1)) {
p_e <- 0;
np_e <- 0;
} else {
p_e <- sum(simulated[[2]][[years +1]][,4])
np_e <- length(simulated[[2]][[years +1]][,4]) - sum(simulated[[2]][[years +1]][,4])
}
# total deforestation
t <- ((p_e + np_e) - (p_s + np_s))/ (p_s + np_s)
difference <- abs(diff(c(t,actual)))
irace_deforecast <- function(instance,params) {
actual <- read.csv("actual.csv")[,2:3]
actual <- actual$fg[actual$id ==  basename(instance)];
start <- readRDS(file = instance);
simulated <- deforecast(xdim = NULL,
ydim = NULL,
explicit = TRUE,
p_n = NULL,
np_n = NULL,
ppl_n = NULL,
ppl_loc = start[[3]],
p_loc = start[[1]],
np_loc = start[[2]],
ppl_scaling = params[[1]],
mean_age = params[[2]],
sd_age = params[[3]],
travel_cost = params[[4]],
value = as.numeric(params[[5]]),
mobility = as.numeric(params[[6]]),
k = params[[7]],
r = params[[8]],
maturity = params[[9]],
max_age = params[[10]],
years = 10,
management_cost = 500)
# results
p_s <- sum(simulated[[2]][[1]][,4]) # trees/year1/protected column == 1
np_s <- length(simulated[[2]][[1]][,4]) - sum(simulated[[2]][[1]][,4])
# protected at start
if (length(simulated[[2]]) != (years + 1)) {
p_e <- 0;
np_e <- 0;
} else {
p_e <- sum(simulated[[2]][[years +1]][,4])
np_e <- length(simulated[[2]][[years +1]][,4]) - sum(simulated[[2]][[years +1]][,4])
}
# total deforestation
t <- ((p_e + np_e) - (p_s + np_s))/ (p_s + np_s)
difference <- abs(diff(c(t,actual)))
cat(difference)
}
instance <- "/home/chris/Downloads/555723848_1.rds"
params <- c(0.122, 68, 10, 1574, 1033, 8, 0.638, 0.193, 13, 104)
test <- irace_deforecast(instance = instance, params = params)
test <- irace_deforecast(instance = instance, params = params)
getwd()
cat(t)
library(roxygen2)
roxygenise()
library(deforecasteR)
devtools::build()
library(deforecasteR)
install.packages("irace")
system.file(package = "irace")
# script for calling irace
library(irace)
setwd("/home/cl59/Documents/irace")
setwd("/home/chris/Documents/irace")
i <- 1;
while (i <= 12) {
assign(x = paste0("scenario", i),
value = readScenario(paste0("s",i)))
i <- i + 1
}
parameters <- readParameters("./parameters.txt")
irace(scenario1,parameters)
irace(scenario1,parameters)
View(scenario1)
i <- 1;
while (i <= 12) {
assign(x = paste0("scenario", i),
value = readScenario(paste0("s",i)))
i <- i + 1
}
parameters <- readParameters("./parameters.txt")
irace(scenario1,parameters)
#! /usr/bin/env Rscript
library(deforecasteR)
library(devtools)
install_github("chrislittleboy/deforecasteR", force = T)
install_github("chrislittleboy/deforecasteR", force = T)
install_github("chrislittleboy/deforecasteR", force = T)
library(deforecasteR)
setwd("home/chris/Documents/irace"
)
getwe()
getwd()
setwd("/home/chris/Documents/irace"
)
install_github("chrislittleboy/deforecasteR", force = T)
library(devtools)
install_github("chrislittleboy/deforecasteR", force = T)
library(deforecasteR)
uninstall("deforecasteR")
library(roxygen2)
library(devtools)
roxygenise()
build()
roxygenise()
install_github("chrislittleboy/deforecasteR", force = T)
#! /usr/bin/env Rscript
library(deforecasteR)
library(deforecasteR)
devtools::document
library(deforecasteR)
roxygenize()
install_github("chrislittleboy/deforecasteR", force = T)
install_github("chrislittleboy/deforecasteR", force = T)
ppl_loc <- readRDS("/home/chris/Documents/irace/train/c1/555646257_1.rds")[[3]]
get_people(ppl_loc, 0.5)
get_people(ppl_loc, 0.5)
get_people(ppl_loc, 0.8)
get_people(ppl_loc, 0.2)
get_people(ppl_loc, 0.01)
get_people(ppl_loc, 0.001)
get_people(ppl_loc, 0.0001)
get_people(ppl_loc, 0.00001)
get_people(ppl_loc, 0.00001)
# script for calling irace
library(irace)
setwd("/home/chris/Documents/irace")
i <- 1;
while (i <= 12) {
assign(x = paste0("scenario", i),
value = readScenario(paste0("s",i)))
i <- i + 1
}
parameters <- readParameters("./parameters.txt")
i <- 1;
while (i <= 12) {
assign(x = paste0("scenario", i),
value = readScenario(paste0("s",i)))
i <- i + 1
}
parameters <- readParameters("./parameters.txt")
irace(scenario1,parameters)
irace(scenario1,parameters)
get_trees <- function(p_loc, # 2 column matrix (x/y)
np_loc, # 2 column matrix (x/y)
mean_age, # integer
sd_age) # integer
{
# gets age of trees (normally distributed)
age_p <- rnorm(n = length(p_loc[,1]), mean = mean_age, sd = sd_age)
age_p[age_p < 0] <- 0 # negative ages to 0
age_p <- round(age_p, digits = 0) # rounds to nearest year
p_loc <- matrix(cbind(p_loc, age_p, rep(1, length(age_p))), ncol = 4)
age_np <- rnorm(n = length(np_loc[,1]), mean = mean_age, sd = sd_age)
age_np[age_np < 0] <- 0
age_np <- round(age_np, digits = 0)
np_loc <- matrix(cbind(np_loc, age_np, rep(0, length(age_np))), ncol = 4)
trees <- rbind(p_loc,np_loc);
return(trees);
}
get_trees <- function(p_loc, # 2 column matrix (x/y)
np_loc, # 2 column matrix (x/y)
mean_age, # integer
sd_age) # integer
{
# gets age of trees (normally distributed)
age_p <- rnorm(n = length(p_loc[,1]), mean = mean_age, sd = sd_age)
age_p[age_p < 0] <- 0 # negative ages to 0
age_p <- round(age_p, digits = 0) # rounds to nearest year
p_loc <- matrix(cbind(p_loc, age_p, rep(1, length(age_p))), ncol = 4)
age_np <- rnorm(n = length(np_loc[,1]), mean = mean_age, sd = sd_age)
age_np[age_np < 0] <- 0
age_np <- round(age_np, digits = 0)
np_loc <- matrix(cbind(np_loc, age_np, rep(0, length(age_np))), ncol = 4)
trees <- rbind(p_loc,np_loc);
return(trees);
}
test <- get_trees(readRDS("/home/chris/Documents/irace/train/c1/555646257_1.rds")[[1]], readRDS("/home/chris/Documents/irace/train/c1/555646257_1.rds")[[2]], 50,25)
View(test)
get_trees <- function(p_loc, # 2 column matrix (x/y)
np_loc, # 2 column matrix (x/y)
mean_age, # integer
sd_age) # integer
{
# gets age of trees (normally distributed)
age_p <- rnorm(n = length(p_loc[,1]), mean = mean_age, sd = sd_age)
age_p[age_p < 0] <- 0 # negative ages to 0
age_p <- round(age_p, digits = 0) # rounds to nearest year
p_loc <- matrix(cbind(p_loc, age_p, rep(1, length(age_p))), ncol = 4)
age_np <- rnorm(n = length(np_loc[,1]), mean = mean_age, sd = sd_age)
age_np[age_np < 0] <- 0
age_np <- round(age_np, digits = 0)
np_loc <- matrix(cbind(np_loc, age_np, rep(0, length(age_np))), ncol = 4)
trees <- rbind(p_loc,np_loc);
trees <- matrix(unlist(matrix(trees)), ncol = 4)
return(trees);
}
test <- get_trees(readRDS("/home/chris/Documents/irace/train/c1/555646257_1.rds")[[1]], readRDS("/home/chris/Documents/irace/train/c1/555646257_1.rds")[[2]], 50,25)
View(test)
get_trees <- function(p_loc, # 2 column matrix (x/y)
np_loc, # 2 column matrix (x/y)
mean_age, # integer
sd_age) # integer
{
# gets age of trees (normally distributed)
age_p <- rnorm(n = length(p_loc[,1]), mean = mean_age, sd = sd_age)
age_p[age_p < 0] <- 0 # negative ages to 0
age_p <- round(age_p, digits = 0) # rounds to nearest year
p_loc <- matrix(cbind(p_loc, age_p, rep(1, length(age_p))), ncol = 4)
age_np <- rnorm(n = length(np_loc[,1]), mean = mean_age, sd = sd_age)
age_np[age_np < 0] <- 0
age_np <- round(age_np, digits = 0)
np_loc <- matrix(cbind(np_loc, age_np, rep(0, length(age_np))), ncol = 4)
trees <- rbind(p_loc,np_loc);
trees <- data.frame(matrix(unlist(matrix(trees)), ncol = 4))
return(trees);
}
test <- get_trees(readRDS("/home/chris/Documents/irace/train/c1/555646257_1.rds")[[1]], readRDS("/home/chris/Documents/irace/train/c1/555646257_1.rds")[[2]], 50,25)
install_github("chrislittleboy/deforecasteR", force = T)
params <- c(0.52, 68, 16, 1719, 599, 90, 0.585, 0.186, 12, 91)
load_all()
irace_deforecast <- function(instance,params) {
actual <- read.csv("/home/chris/Documents/irace/actual.csv")[,2:3]
actual <- actual$fg[actual$id ==  basename(instance)];
start <- readRDS(file = instance);
simulated <- deforecasteR::deforecast(xdim = NULL,
ydim = NULL,
explicit = TRUE,
p_n = NULL,
np_n = NULL,
ppl_n = NULL,
ppl_loc = start[[3]],
p_loc = start[[1]],
np_loc = start[[2]],
ppl_scaling = as.numeric(params[[1]]),
mean_age = as.numeric(params[[2]]),
sd_age = as.numeric(params[[3]]),
travel_cost = as.numeric(params[[4]]),
value = as.numeric(params[[5]]),
mobility = as.numeric(params[[6]]),
k = as.numeric(params[[7]]),
r = as.numeric(params[[8]]),
maturity = as.numeric(params[[9]]),
max_age = as.numeric(params[[10]]),
years = 10,
management_cost = 500)
years = 10
# results
p_s <- sum(simulated[[2]][[1]][,4]) # trees/year1/protected column == 1
np_s <- length(simulated[[2]][[1]][,4]) - sum(simulated[[2]][[1]][,4])
# protected at start
if (length(simulated[[2]]) != (years + 1)) {
p_e <- 0;
np_e <- 0;
} else {
p_e <- sum(simulated[[2]][[years +1]][,4])
np_e <- length(simulated[[2]][[years +1]][,4]) - sum(simulated[[2]][[years +1]][,4])
}
# total deforestation
t <- ((p_e + np_e) - (p_s + np_s))/ (p_s + np_s)
difference <- abs(diff(c(t,actual)))
return(difference)
}
cat(irace_deforecast(instance, params))
#debug
rm(list = ls())
params <- c(0.52, 68, 16, 1719, 599, 90, 0.585, 0.186, 12, 91)
instance <- "/home/chris/Documents/irace/train/c1/555646257_1.rds"
irace_deforecast <- function(instance,params) {
actual <- read.csv("/home/chris/Documents/irace/actual.csv")[,2:3]
actual <- actual$fg[actual$id ==  basename(instance)];
start <- readRDS(file = instance);
simulated <- deforecasteR::deforecast(xdim = NULL,
ydim = NULL,
explicit = TRUE,
p_n = NULL,
np_n = NULL,
ppl_n = NULL,
ppl_loc = start[[3]],
p_loc = start[[1]],
np_loc = start[[2]],
ppl_scaling = as.numeric(params[[1]]),
mean_age = as.numeric(params[[2]]),
sd_age = as.numeric(params[[3]]),
travel_cost = as.numeric(params[[4]]),
value = as.numeric(params[[5]]),
mobility = as.numeric(params[[6]]),
k = as.numeric(params[[7]]),
r = as.numeric(params[[8]]),
maturity = as.numeric(params[[9]]),
max_age = as.numeric(params[[10]]),
years = 10,
management_cost = 500)
years = 10
# results
p_s <- sum(simulated[[2]][[1]][,4]) # trees/year1/protected column == 1
np_s <- length(simulated[[2]][[1]][,4]) - sum(simulated[[2]][[1]][,4])
# protected at start
if (length(simulated[[2]]) != (years + 1)) {
p_e <- 0;
np_e <- 0;
} else {
p_e <- sum(simulated[[2]][[years +1]][,4])
np_e <- length(simulated[[2]][[years +1]][,4]) - sum(simulated[[2]][[years +1]][,4])
}
# total deforestation
t <- ((p_e + np_e) - (p_s + np_s))/ (p_s + np_s)
difference <- abs(diff(c(t,actual)))
return(difference)
}
cat(irace_deforecast(instance, params))
install_github("chrislittleboy/deforecasteR")
install_github("chrislittleboy/deforecasteR", force = T)
cat(irace_deforecast(instance, params))
irace_deforecast <- function(instance,params) {
actual <- read.csv("/home/chris/Documents/irace/actual.csv")[,2:3]
actual <- actual$fg[actual$id ==  basename(instance)];
start <- readRDS(file = instance);
simulated <- deforecast(xdim = NULL,
ydim = NULL,
explicit = TRUE,
p_n = NULL,
np_n = NULL,
ppl_n = NULL,
ppl_loc = start[[3]],
p_loc = start[[1]],
np_loc = start[[2]],
ppl_scaling = as.numeric(params[[1]]),
mean_age = as.numeric(params[[2]]),
sd_age = as.numeric(params[[3]]),
travel_cost = as.numeric(params[[4]]),
value = as.numeric(params[[5]]),
mobility = as.numeric(params[[6]]),
k = as.numeric(params[[7]]),
r = as.numeric(params[[8]]),
maturity = as.numeric(params[[9]]),
max_age = as.numeric(params[[10]]),
years = 10,
management_cost = 500)
years = 10
# results
p_s <- sum(simulated[[2]][[1]][,4]) # trees/year1/protected column == 1
np_s <- length(simulated[[2]][[1]][,4]) - sum(simulated[[2]][[1]][,4])
# protected at start
if (length(simulated[[2]]) != (years + 1)) {
p_e <- 0;
np_e <- 0;
} else {
p_e <- sum(simulated[[2]][[years +1]][,4])
np_e <- length(simulated[[2]][[years +1]][,4]) - sum(simulated[[2]][[years +1]][,4])
}
# total deforestation
t <- ((p_e + np_e) - (p_s + np_s))/ (p_s + np_s)
difference <- abs(diff(c(t,actual)))
return(difference)
}
cat(irace_deforecast(instance, params))
cat(irace_deforecast(instance, params))
cat(irace_deforecast(instance, params))
cat(irace_deforecast(instance, params))
cat(irace_deforecast(instance, params))
install_github("chrislittleboy/deforecasteR", force = T)
install_github("chrislittleboy/deforecasteR", force = T)
simulated <- deforecast(xdim = NULL,
ydim = NULL,
explicit = TRUE,
p_n = NULL,
np_n = NULL,
ppl_n = NULL,
ppl_loc = start[[3]],
p_loc = start[[1]],
np_loc = start[[2]],
ppl_scaling = as.numeric(params[[1]]),
mean_age = as.numeric(params[[2]]),
sd_age = as.numeric(params[[3]]),
travel_cost = as.numeric(params[[4]]),
value = as.numeric(params[[5]]),
mobility = as.numeric(params[[6]]),
k = as.numeric(params[[7]]),
r = as.numeric(params[[8]]),
maturity = as.numeric(params[[9]]),
max_age = as.numeric(params[[10]]),
years = 10,
management_cost = 500)
years = 10
cat(irace_deforecast(instance, params))
cat(irace_deforecast(instance, params))
cat(irace_deforecast(instance, params))
cat(irace_deforecast(instance, params))
cat(irace_deforecast(instance, params))
simulated <- deforecast(xdim = NULL,
ydim = NULL,
explicit = TRUE,
p_n = NULL,
np_n = NULL,
ppl_n = NULL,
ppl_loc = start[[3]],
p_loc = start[[1]],
np_loc = start[[2]],
ppl_scaling = as.numeric(params[[1]]),
mean_age = as.numeric(params[[2]]),
sd_age = as.numeric(params[[3]]),
travel_cost = as.numeric(params[[4]]),
value = as.numeric(params[[5]]),
mobility = as.numeric(params[[6]]),
k = as.numeric(params[[7]]),
r = as.numeric(params[[8]]),
maturity = as.numeric(params[[9]]),
max_age = as.numeric(params[[10]]),
years = 10,
management_cost = 500)
#debug
params <- c(0.52, 68, 16, 1719, 599, 90, 0.585, 0.186, 12, 91)
instance <- "/home/chris/Documents/irace/train/c1/555646257_1.rds"
irace_deforecast <- function(instance,params) {
actual <- read.csv("/home/chris/Documents/irace/actual.csv")[,2:3]
actual <- actual$fg[actual$id ==  basename(instance)];
start <- readRDS(file = instance);
simulated <- deforecast(xdim = NULL,
ydim = NULL,
explicit = TRUE,
p_n = NULL,
np_n = NULL,
ppl_n = NULL,
ppl_loc = start[[3]],
p_loc = start[[1]],
np_loc = start[[2]],
ppl_scaling = as.numeric(params[[1]]),
mean_age = as.numeric(params[[2]]),
sd_age = as.numeric(params[[3]]),
travel_cost = as.numeric(params[[4]]),
value = as.numeric(params[[5]]),
mobility = as.numeric(params[[6]]),
k = as.numeric(params[[7]]),
r = as.numeric(params[[8]]),
maturity = as.numeric(params[[9]]),
max_age = as.numeric(params[[10]]),
years = 10,
management_cost = 500)
years = 10
# results
p_s <- sum(simulated[[2]][[1]][,4]) # trees/year1/protected column == 1
np_s <- length(simulated[[2]][[1]][,4]) - sum(simulated[[2]][[1]][,4])
# protected at start
if (length(simulated[[2]]) != (years + 1)) {
p_e <- 0;
np_e <- 0;
} else {
p_e <- sum(simulated[[2]][[years +1]][,4])
np_e <- length(simulated[[2]][[years +1]][,4]) - sum(simulated[[2]][[years +1]][,4])
}
# total deforestation
t <- ((p_e + np_e) - (p_s + np_s))/ (p_s + np_s)
difference <- abs(diff(c(t,actual)))
return(difference)
}
cat(irace_deforecast(instance, params))
get_trees()
get_trees
install_github("chrislittleboy/deforecasteR", force = T)
library(deforecasteR)
get_trees
getwd()
deforecaster::get_tree
deforecasteR::get_tree
deforecasteR::gettree
